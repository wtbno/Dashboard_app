"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.schema = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
const typescript_json_schema_1 = require("typescript-json-schema");
const settings = {
    // TODO (INS-1033): some day, it'd be ideal to do something like this. (when we do, remember to change the README for insomnia-config)
    // id: 'https://schema.insomnia.rest/json/draft-07/config/v1.0.0/',
    noExtraProps: true,
    required: true,
};
const compilerOptions = {
    strict: true,
};
const basePath = '.';
const program = typescript_json_schema_1.getProgramFromFiles([path_1.resolve('./src/entities.ts')], compilerOptions, basePath);
exports.schema = typescript_json_schema_1.generateSchema(program, 'InsomniaConfig', settings);
if (exports.schema === null) {
    throw new Error('failed to generate Insomnia Config');
}
const schemaDestination = './src/generated/schemas/insomnia.schema.json';
const stringSchema = JSON.stringify(exports.schema, null, 2);
fs_1.writeFileSync(schemaDestination, stringSchema);
//# sourceMappingURL=generate.js.map