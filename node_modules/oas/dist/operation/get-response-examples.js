var getMediaTypeExamples = require('../lib/get-mediatype-examples');
/**
 * @param {object} operation
 */
module.exports = function (operation) {
    return Object.keys(operation.responses || {})
        .map(function (status) {
        var response = operation.responses[status];
        // If we have a $ref here that means that this was a circular ref so we should ignore it.
        if (response.$ref) {
            return false;
        }
        var mediaTypes = {};
        (response.content ? Object.keys(response.content) : []).forEach(function (mediaType) {
            if (!mediaType)
                return;
            var mediaTypeObject = response.content[mediaType];
            mediaTypes[mediaType] = getMediaTypeExamples(mediaType, mediaTypeObject, {
                includeReadOnly: true,
                includeWriteOnly: false
            });
        });
        if (!Object.keys(mediaTypes).length) {
            return false;
        }
        return {
            status: status,
            mediaTypes: mediaTypes
        };
    })
        .filter(Boolean);
};
